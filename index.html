<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Genesys Demo Agent Script</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-color: #0d6efd;
      --accent-color: #fd5f46;
      --text-color: #212529;
      --bg-color: #f2f4f8;
      --card-bg: #ffffff;
      --border-radius: 16px;
    }
    body {
      background-color: var(--bg-color);
      font-family: 'Segoe UI', sans-serif;
      color: var(--text-color);
      padding: 20px;
    }
    .app-container {
      max-width: 1000px;
      margin: auto;
    }
    .card-soft {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: 0 6px 24px rgba(0,0,0,0.06);
      padding: 30px;
      margin-bottom: 24px;
    }
    .header-banner {
      background-color: var(--accent-color);
      border-radius: var(--border-radius);
      padding: 20px;
      color: white;
      display: flex;
      justify-content: flex-end;
      align-items: center;
    }
    .btn-rounded {
      border-radius: var(--border-radius);
      padding: 10px 20px;
    }
    .form-control, .form-select {
      border-radius: var(--border-radius);
    }
    .checklist-item {
      margin-bottom: 10px;
    }
    .toggle-switch {
      margin-right: 1rem;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <div class="header-banner">
      <div class="text-end">
        <div><strong>Department:</strong> <span id="departmentName"></span></div>
      </div>
    </div>

    <!-- Configuration Panel -->
    <div class="card-soft">
      <h5>Configuration Panel</h5>
      <div class="form-check form-switch toggle-switch">
        <input class="form-check-input" type="checkbox" id="toggleChecklist" checked>
        <label class="form-check-label" for="toggleChecklist">Show Checklist</label>
      </div>
      <div class="form-check form-switch toggle-switch">
        <input class="form-check-input" type="checkbox" id="togglePreferences" checked>
        <label class="form-check-label" for="togglePreferences">Show Preferences</label>
      </div>
    </div>

    <!-- Caller Info -->
    <div class="card-soft">
      <h5>Caller Info: <span id="callerNotes">Customer</span></h5>
      <div class="row g-3">
        <div class="col-md-6">
          <label>Name</label>
          <input id="callerName" class="form-control" readonly>
        </div>
        <div class="col-md-6">
          <label>Phone</label>
          <input id="callerPhone" class="form-control" readonly>
        </div>
        <div class="col-md-6">
          <label>Email</label>
          <input id="callerEmail" class="form-control" readonly>
        </div>
        <div class="col-md-6">
          <label>Service ID</label>
          <input id="serviceId" class="form-control" readonly>
        </div>
        <div class="col-md-12">
          <label>Address</label>
          <input id="callerAddress" class="form-control" readonly>
        </div>
      </div>
    </div>

    <!-- Checklist -->
    <div id="checklistCard" class="card-soft">
      <h5>Call Checklist</h5>
      <div class="form-check checklist-item">
        <input class="form-check-input" type="checkbox" id="check1">
        <label class="form-check-label" for="check1">Verify caller identity</label>
      </div>
      <div class="form-check checklist-item">
        <input class="form-check-input" type="checkbox" id="check2">
        <label class="form-check-label" for="check2">Confirm reason for call</label>
      </div>
      <div class="form-check checklist-item">
        <input class="form-check-input" type="checkbox" id="check3">
        <label class="form-check-label" for="check3">Provide disclaimer (if required)</label>
      </div>
      <div class="form-check checklist-item">
        <input class="form-check-input" type="checkbox" id="check4">
        <label class="form-check-label" for="check4">Capture notes in CRM</label>
      </div>
    </div>

    <!-- Preferences -->
    <div id="preferencesCard" class="card-soft">
      <h5>Contact Preferences</h5>
      <div>
        <label><input type="checkbox" id="prefVoice"> Voice</label>
        <label><input type="checkbox" id="prefSMS"> SMS</label>
        <label><input type="checkbox" id="prefEmail"> Email</label>
        <label class="ms-3"><input type="checkbox" id="smsOptIn"> SMS Opt-In</label>
      </div>
    </div>

    <!-- Actions -->
    <div class="card-soft text-center">
      <div class="row g-3">
        <div class="col-md-4">
          <button class="btn btn-primary btn-rounded w-100">Create New Case</button>
        </div>
        <div class="col-md-4">
          <button class="btn btn-primary btn-rounded w-100">Update Info</button>
        </div>
        <div class="col-md-4">
          <button id="actionBtn2" class="btn btn-danger btn-rounded w-100">Notify Supervisor</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    function getParam(key) {
      const params = new URLSearchParams(window.location.search);
      return decodeURIComponent(params.get(key) || "");
    }

    window.onload = () => {
      // Populate static fields
      document.getElementById("callerName").value = getParam("FNAME") + " " + getParam("LNAME");
      document.getElementById("callerPhone").value = getParam("PHONE");
      document.getElementById("callerEmail").value = getParam("EMAIL");
      document.getElementById("callerAddress").value = getParam("ADDRESS");
      document.getElementById("serviceId").value = getParam("AccountPatientOrMemberID") || getParam("CCN");
      document.getElementById("callerNotes").textContent = getParam("Notes") || "Customer";
      document.getElementById("departmentName").textContent = getParam("DepartmentName");

      // Preferences
      document.getElementById("prefVoice").checked = getParam("Prefer_Voice") === "true";
      document.getElementById("prefSMS").checked = getParam("Pref_SMS") === "true";
      document.getElementById("prefEmail").checked = getParam("Pref_Email") === "true";
      document.getElementById("smsOptIn").checked = getParam("SMSOptIn") === "true";

      // Button text and theme
      document.getElementById("actionBtn2").textContent = getParam("Button2TEXT") || "Notify Supervisor";
      document.documentElement.style.setProperty('--accent-color', getParam("HeaderColor") || '#fd5f46');
      document.documentElement.style.setProperty('--primary-color', getParam("ButtonColor") || '#0d6efd');
      document.body.style.backgroundColor = getParam("PageBackgroundColor") || '#f2f4f8';

      // Toggle switches
      document.getElementById("toggleChecklist").addEventListener('change', function() {
        document.getElementById("checklistCard").style.display = this.checked ? 'block' : 'none';
      });
      document.getElementById("togglePreferences").addEventListener('change', function() {
        document.getElementById("preferencesCard").style.display = this.checked ? 'block' : 'none';
      });
    };
  </script>
</body>
</html>
